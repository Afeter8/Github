<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>FGME Sistema Unificado Seguro</title>
  <style>
    /* CSS Optimizado */
    body {
      background: #000;
      color: #0ff;
      font-family: monospace;
      margin: 0;
      padding: 2rem;
    }
    textarea, pre {
      width: 100%;
      background: #111;
      color: #0ff;
      border: 1px solid #0ff;
      padding: 1rem;
      margin-bottom: 1rem;
      resize: vertical;
    }
    button {
      background: #0ff;
      border: none;
      padding: 0.5rem 1rem;
      cursor: pointer;
      font-weight: bold;
      color: #000;
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>

<h1>FGME Sistema Unificado Seguro</h1>

<textarea id="input" rows="5" placeholder="Escribe código o datos..."></textarea>
<button id="run">Ejecutar Procesamiento</button>

<pre id="output">Esperando ejecución...</pre>

<script>
  // JSON de configuración y datos seguros
  const config = {
    autor: "Fernando Guadalupe Mendez Espinoza",
    modo: "inmutable_seguro",
    firmaDigital: "FGME-SHA512-UNICO-0001",
    bucleEterno: true,
  };

  // Función principal que integra lógica JS + simulación Python + procesamiento JSON
  async function procesarEntrada(entrada) {
    // Simulación básica: invertir texto + JSON parse + cifrado XOR simple
    function xorCifrar(text, key) {
      return [...text].map((c, i) => String.fromCharCode(c.charCodeAt(0) ^ key.charCodeAt(i % key.length))).join('');
    }

    // Simulación "Python" embebido con Pyodide (simplemente invertimos string aquí)
    function pythonSimulado(text) {
      return text.split('').reverse().join('');
    }

    // Procesamiento JSON simulado: parsear y mostrar propiedades
    function jsonProcesar(text) {
      try {
        const obj = JSON.parse(text);
        return `JSON válido con claves: ${Object.keys(obj).join(', ')}`;
      } catch {
        return "No es JSON válido.";
      }
    }

    // Combina todos
    let resultadoJS = xorCifrar(entrada, config.firmaDigital);
    let resultadoPy = pythonSimulado(entrada);
    let resultadoJSON = jsonProcesar(entrada);

    return `➡️ XOR cifrado:\n${resultadoJS}\n\n➡️ Python simulado:\n${resultadoPy}\n\n➡️ JSON analizado:\n${resultadoJSON}`;
  }

  async function run() {
    const entrada = document.getElementById("input").value.trim();
    if(!entrada) {
      document.getElementById("output").innerText = "❌ No hay entrada para procesar.";
      return;
    }
    document.getElementById("output").innerText = "⏳ Procesando...";
    const resultado = await procesarEntrada(entrada);
    document.getElementById("output").innerText = resultado;
  }

  document.getElementById("run").addEventListener("click", run);

  // Bucle eterno de ejecución automática
  if (config.bucleEterno) {
    setInterval(() => {
      const entrada = document.getElementById("input").value.trim();
      if (entrada) run();
    }, 8000);
  }
</script>

<!-- JSON de configuración inmutable -->
<script type="application/json" id="config-fgme">
{
  "autor": "Fernando Guadalupe Mendez Espinoza",
  "modo": "inmutable_seguro",
  "bucle_eterno": true,
  "firma_digital": "FGME-SHA512-UNICO-0001"
}
</script>

</body>
</html>
